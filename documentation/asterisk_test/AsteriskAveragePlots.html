<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>asterisk_test.AsteriskAveragePlots API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>asterisk_test.AsteriskAveragePlots</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3

from math import pi, cos, sin, sqrt
import matplotlib.pyplot as plt

from AsteriskTestMetrics import Pose2D, AsteriskTestMetrics2D, AsteriskTestResults
from AsteriskAverage import AsteriskAverage
from AsteriskTestTypes import AsteriskTestTypes
from pathlib import Path
import os


def plot_pose(pose: Pose2D, rgb=(0.5, 0.5, 0.5), scl=1.0) -&gt; None:
    &#34;&#34;&#34; Plot a single pose as a circle with a line for orientation
    :param pose - the pose,
    :param rgb - the color, default grey,
    :param scl - amount to scale marker by&#34;&#34;&#34;

    ms = str(max(int(10.0 * scl), 1))
    plt.plot(pose.x, pose.y, marker=&#39;o&#39;, markersize=ms, color=rgb)
    dx = scl * 0.05 * cos(pi * pose.theta/180.0)
    dy = scl * 0.05 * sin(pi * pose.theta/180.0)
    plt.plot([pose.x, pose.x+dx], [pose.y, pose.y+dy], linewidth=0.5, color=(0, 0, 0))


def plot_star(target_paths: [Pose2D]):
    &#34;&#34;&#34; Plot the star in the middle
     :param - target_paths - all of the target paths from AsteriskTestMetrics2D&#34;&#34;&#34;

    for path in target_paths[&#34;Translation&#34;]:
        plt.plot([0, path[-1].x], [0, path[-1].y], color=&#34;grey&#34;, linestyle=&#39;--&#39;)
        plot_pose(path[-1])


def plot_frechet_translation(my_asterisk: AsteriskTestMetrics2D) -&gt; None:
    &#34;&#34;&#34; Plot the path and the frechet match
    :param - my_asterisk - the test metrics&#34;&#34;&#34;

    # Find the results that are translations

    plt.title(my_asterisk.test_name)
    for att in AsteriskTestTypes.generate_translation():
        for res in my_asterisk.get_test_results(att):
            plt.plot(res.obj_poses[0, :], res.obj_poses[1, :], color=&#34;red&#34;, linestyle=&#39;dotted&#39;)
            for i, index in enumerate(res.target_indices):
                plt.plot([res.target_path[i].x, res.obj_poses[0, index]],
                         [res.target_path[i].y, res.obj_poses[1, index]],
                         linestyle=&#39;-&#39;, color=&#34;black&#34;, marker=&#39;.&#39;)
                plot_pose(Pose2D(res.obj_poses[0, index], res.obj_poses[1, index], res.obj_poses[2, index]), scl=0.5)


def plot_average_translation(asterisk_avg: AsteriskAverage):
    &#34;&#34;&#34;Plot the average path
    :param asterisk_avg - the computed averages&#34;&#34;&#34;

    # Offset vectors
    vec_offset = []
    for i in range(0, len(asterisk_avg.pose_average)):
        try:
            prev_x = asterisk_avg.pose_average[i-1].x
            prev_y = asterisk_avg.pose_average[i-1].y
        except IndexError:
            prev_x = asterisk_avg.pose_average[i].x
            prev_y = asterisk_avg.pose_average[i].y
        try:
            next_x = asterisk_avg.pose_average[i+1].x
            next_y = asterisk_avg.pose_average[i+1].y
        except IndexError:
            next_x = asterisk_avg.pose_average[i].x
            next_y = asterisk_avg.pose_average[i].y

        dx = next_x - prev_x
        dy = next_y - prev_y
        dlen = sqrt(dx * dx + dy * dy)
        vx = asterisk_avg.pose_sd[i][0] * -dy / dlen
        vy = asterisk_avg.pose_sd[i][0] * dx / dlen

        if dlen &lt; 1e-10:
            vec_offset.append((-dy, dx))
        else:
            vec_offset.append((vx, vy))

    poly = []
    for a, v in zip(asterisk_avg.pose_average, vec_offset):
        pt = [a.x + v[0], a.y + v[1]]
        poly.append(pt)

    for a, v in zip(reversed(asterisk_avg.pose_average), reversed(vec_offset)):
        pt = [a.x - v[0], a.y - v[1]]
        poly.append(pt)

    # For debugging - plot the vx, vy
    # for v, p in zip(vec_offset, asterisk_avg.pose_average):
    #     plt.plot([p.x, p.x + v[0]], [p.y, p.y + v[1]], color=&#39;black&#39;, linestyle=&#39;-&#39;)
    # Poses at dots
    for p in asterisk_avg.pose_average:
        plot_pose(p, scl=0.25)

    polyg = plt.Polygon(poly, color=&#39;green&#39;, alpha=0.5)
    #polyg = plt.Polygon([[0,0], [0,1], [1,0]])
    plt.gca().add_patch(polyg)

    # Line down the middle
    plt.plot([p.x for p in asterisk_avg.pose_average],
             [p.y for p in asterisk_avg.pose_average],
             linestyle=&#39;-&#39;, color=&#34;black&#34;)


if __name__ == &#39;__main__&#39;:
    home_directory = Path(__file__).parent.absolute()
    file_dir = f&#34;filtered/&#34;
    os.chdir(file_dir)

    hand_names = [&#34;basic&#34;, &#34;m2stiff&#34;, &#34;m2active&#34;, &#34;2v2&#34;, &#34;3v3&#34;, &#34;2v3&#34;, &#34;barrett&#34;, &#34;modelvf&#34;]

    subject_name_process = &#34;f15_sub2&#34;
    hand_process = &#34;modelvf&#34;
    my_test_results = AsteriskTestMetrics2D.process_files(subject_name_process, hand_process)

    fig, axs = plt.subplots(2, len(my_test_results))

    for i, tr in enumerate(my_test_results):
        plt.axes(axs[0, i])
        axs[0, i].set_aspect(&#39;equal&#39;, adjustable=&#39;box&#39;)
        plot_star(tr.target_paths)
        plot_frechet_translation(tr)

    # Find the results that are translations
    plt.axes(axs[1, 0])
    axs[1, 0].set_aspect(&#39;equal&#39;, adjustable=&#39;box&#39;)
    plot_star(my_test_results[0].target_paths)
    for tt in AsteriskTestTypes.generate_translation():
        ret_tests = []
        for trial_t in my_test_results:
            ret_tests.extend(trial_t.get_test_results(tt))

        at_avg = AsteriskAverage()
        at_avg.set_average(ret_tests)

        plot_average_translation(at_avg)

    plt.show(block=True)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="asterisk_test.AsteriskAveragePlots.plot_average_translation"><code class="name flex">
<span>def <span class="ident">plot_average_translation</span></span>(<span>asterisk_avg: AsteriskAverage.AsteriskAverage)</span>
</code></dt>
<dd>
<div class="desc"><p>Plot the average path
:param asterisk_avg - the computed averages</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def plot_average_translation(asterisk_avg: AsteriskAverage):
    &#34;&#34;&#34;Plot the average path
    :param asterisk_avg - the computed averages&#34;&#34;&#34;

    # Offset vectors
    vec_offset = []
    for i in range(0, len(asterisk_avg.pose_average)):
        try:
            prev_x = asterisk_avg.pose_average[i-1].x
            prev_y = asterisk_avg.pose_average[i-1].y
        except IndexError:
            prev_x = asterisk_avg.pose_average[i].x
            prev_y = asterisk_avg.pose_average[i].y
        try:
            next_x = asterisk_avg.pose_average[i+1].x
            next_y = asterisk_avg.pose_average[i+1].y
        except IndexError:
            next_x = asterisk_avg.pose_average[i].x
            next_y = asterisk_avg.pose_average[i].y

        dx = next_x - prev_x
        dy = next_y - prev_y
        dlen = sqrt(dx * dx + dy * dy)
        vx = asterisk_avg.pose_sd[i][0] * -dy / dlen
        vy = asterisk_avg.pose_sd[i][0] * dx / dlen

        if dlen &lt; 1e-10:
            vec_offset.append((-dy, dx))
        else:
            vec_offset.append((vx, vy))

    poly = []
    for a, v in zip(asterisk_avg.pose_average, vec_offset):
        pt = [a.x + v[0], a.y + v[1]]
        poly.append(pt)

    for a, v in zip(reversed(asterisk_avg.pose_average), reversed(vec_offset)):
        pt = [a.x - v[0], a.y - v[1]]
        poly.append(pt)

    # For debugging - plot the vx, vy
    # for v, p in zip(vec_offset, asterisk_avg.pose_average):
    #     plt.plot([p.x, p.x + v[0]], [p.y, p.y + v[1]], color=&#39;black&#39;, linestyle=&#39;-&#39;)
    # Poses at dots
    for p in asterisk_avg.pose_average:
        plot_pose(p, scl=0.25)

    polyg = plt.Polygon(poly, color=&#39;green&#39;, alpha=0.5)
    #polyg = plt.Polygon([[0,0], [0,1], [1,0]])
    plt.gca().add_patch(polyg)

    # Line down the middle
    plt.plot([p.x for p in asterisk_avg.pose_average],
             [p.y for p in asterisk_avg.pose_average],
             linestyle=&#39;-&#39;, color=&#34;black&#34;)</code></pre>
</details>
</dd>
<dt id="asterisk_test.AsteriskAveragePlots.plot_frechet_translation"><code class="name flex">
<span>def <span class="ident">plot_frechet_translation</span></span>(<span>my_asterisk: AsteriskTestMetrics.AsteriskTestMetrics2D) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Plot the path and the frechet match
:param - my_asterisk - the test metrics</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def plot_frechet_translation(my_asterisk: AsteriskTestMetrics2D) -&gt; None:
    &#34;&#34;&#34; Plot the path and the frechet match
    :param - my_asterisk - the test metrics&#34;&#34;&#34;

    # Find the results that are translations

    plt.title(my_asterisk.test_name)
    for att in AsteriskTestTypes.generate_translation():
        for res in my_asterisk.get_test_results(att):
            plt.plot(res.obj_poses[0, :], res.obj_poses[1, :], color=&#34;red&#34;, linestyle=&#39;dotted&#39;)
            for i, index in enumerate(res.target_indices):
                plt.plot([res.target_path[i].x, res.obj_poses[0, index]],
                         [res.target_path[i].y, res.obj_poses[1, index]],
                         linestyle=&#39;-&#39;, color=&#34;black&#34;, marker=&#39;.&#39;)
                plot_pose(Pose2D(res.obj_poses[0, index], res.obj_poses[1, index], res.obj_poses[2, index]), scl=0.5)</code></pre>
</details>
</dd>
<dt id="asterisk_test.AsteriskAveragePlots.plot_pose"><code class="name flex">
<span>def <span class="ident">plot_pose</span></span>(<span>pose: AsteriskTestMetrics.Pose2D, rgb=(0.5, 0.5, 0.5), scl=1.0) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Plot a single pose as a circle with a line for orientation
:param pose - the pose,
:param rgb - the color, default grey,
:param scl - amount to scale marker by</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def plot_pose(pose: Pose2D, rgb=(0.5, 0.5, 0.5), scl=1.0) -&gt; None:
    &#34;&#34;&#34; Plot a single pose as a circle with a line for orientation
    :param pose - the pose,
    :param rgb - the color, default grey,
    :param scl - amount to scale marker by&#34;&#34;&#34;

    ms = str(max(int(10.0 * scl), 1))
    plt.plot(pose.x, pose.y, marker=&#39;o&#39;, markersize=ms, color=rgb)
    dx = scl * 0.05 * cos(pi * pose.theta/180.0)
    dy = scl * 0.05 * sin(pi * pose.theta/180.0)
    plt.plot([pose.x, pose.x+dx], [pose.y, pose.y+dy], linewidth=0.5, color=(0, 0, 0))</code></pre>
</details>
</dd>
<dt id="asterisk_test.AsteriskAveragePlots.plot_star"><code class="name flex">
<span>def <span class="ident">plot_star</span></span>(<span>target_paths: [<class 'AsteriskTestMetrics.Pose2D'>])</span>
</code></dt>
<dd>
<div class="desc"><p>Plot the star in the middle
:param - target_paths - all of the target paths from AsteriskTestMetrics2D</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def plot_star(target_paths: [Pose2D]):
    &#34;&#34;&#34; Plot the star in the middle
     :param - target_paths - all of the target paths from AsteriskTestMetrics2D&#34;&#34;&#34;

    for path in target_paths[&#34;Translation&#34;]:
        plt.plot([0, path[-1].x], [0, path[-1].y], color=&#34;grey&#34;, linestyle=&#39;--&#39;)
        plot_pose(path[-1])</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="asterisk_test" href="index.html">asterisk_test</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="asterisk_test.AsteriskAveragePlots.plot_average_translation" href="#asterisk_test.AsteriskAveragePlots.plot_average_translation">plot_average_translation</a></code></li>
<li><code><a title="asterisk_test.AsteriskAveragePlots.plot_frechet_translation" href="#asterisk_test.AsteriskAveragePlots.plot_frechet_translation">plot_frechet_translation</a></code></li>
<li><code><a title="asterisk_test.AsteriskAveragePlots.plot_pose" href="#asterisk_test.AsteriskAveragePlots.plot_pose">plot_pose</a></code></li>
<li><code><a title="asterisk_test.AsteriskAveragePlots.plot_star" href="#asterisk_test.AsteriskAveragePlots.plot_star">plot_star</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>